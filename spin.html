<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>FIK â€“ Lucky Spin</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body{
  margin:0;
  background:#0b2c5f;
  font-family:Arial,sans-serif;
  color:#fff;
  text-align:center;
}
.topbar{
  background:#081f44;
  padding:12px 16px;
  display:flex;
  justify-content:space-between;
}
.wheel-wrap{
  position:relative;
  width:320px;
  height:320px;
  margin:40px auto;
}
#wheel{
  width:100%;
  height:100%;
  border-radius:50%;
  border:14px solid #f7c843;
  transition:transform 4s cubic-bezier(.17,.67,.25,1);
}
.pointer{
  position:absolute;
  top:-22px;
  left:50%;
  transform:translateX(-50%);
  width:0;height:0;
  border-left:14px solid transparent;
  border-right:14px solid transparent;
  border-bottom:26px solid red;
}
button{
  padding:14px 40px;
  font-size:18px;
  border:none;
  border-radius:30px;
  background:#ffb703;
}
</style>
</head>

<body>

<div class="topbar">
  <div>ðŸŽ¡ Lucky Spin</div>
  <div>FC: <span id="fc">0</span> | Spins: <span id="spins">3</span></div>
</div>

<div class="wheel-wrap">
  <div class="pointer"></div>
  <canvas id="wheel" width="320" height="320"></canvas>
</div>

<button onclick="spin()">SPIN</button>

<script>
const rewards = [150,30,50,20,0,15,70,50,10,100];
const colors  = ["#f94144","#f3722c","#f8961e","#f9c74f","#90be6d",
                 "#43aa8b","#577590","#277da1","#9b5de5","#ef476f"];

const canvas = document.getElementById("wheel");
const ctx = canvas.getContext("2d");

const slices = rewards.length;
const sliceAngle = 2*Math.PI / slices;

let currentRotation = 0;
let spinning = false;

let fc = Number(localStorage.getItem("fc")) || 0;
let spins = Number(localStorage.getItem("spins")) || 3;
document.getElementById("fc").innerText = fc;
document.getElementById("spins").innerText = spins;

function drawWheel(){
  ctx.clearRect(0,0,320,320);
  for(let i=0;i<slices;i++){
    ctx.beginPath();
    ctx.moveTo(160,160);
    ctx.arc(160,160,146,i*sliceAngle,(i+1)*sliceAngle);
    ctx.fillStyle = colors[i];
    ctx.fill();
    ctx.save();
    ctx.translate(160,160);
    ctx.rotate(i*sliceAngle + sliceAngle/2);
    ctx.fillStyle="#fff";
    ctx.font="16px Arial";
    ctx.textAlign="right";
    ctx.fillText(rewards[i],140,5);
    ctx.restore();
  }
}
drawWheel();

function spin(){
  if(spinning || spins<=0) return;
  spinning = true;
  spins--;
  localStorage.setItem("spins",spins);
  document.getElementById("spins").innerText = spins;

  const winIndex = Math.floor(Math.random()*slices);

  const targetAngle =
    (3*Math.PI/2) - (winIndex*sliceAngle + sliceAngle/2);

  const extraTurns = (Math.floor(Math.random()*3)+5) * 2*Math.PI;

  currentRotation += extraTurns + targetAngle;
  canvas.style.transform = `rotate(${currentRotation}rad)`;

  setTimeout(()=>{
    const win = rewards[winIndex];
    if(win>0){
      fc += win;
      localStorage.setItem("fc",fc);
      document.getElementById("fc").innerText = fc;
      alert("You won "+win+" FC");
    }else{
      alert("No reward this spin");
    }
    spinning=false;
  },4000);
}
</script>

</body>
</html>
